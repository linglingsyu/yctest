import{_,o as d,c as s,b as r,x as h,F as m,y as b,s as k,v as D,e as g,z as w,u}from"./index-f4b95e5f.js";const{VITE_URL:x,VITE_PATH:O}={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"healing_chou",BASE_URL:"/yctest/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},T={data(){return{months:["January","February","March","April","May","June","July","August","September","October","November","December"],orders:[],tempOrder:{name:"name",phone:"0987654321",email:"",message:"",time:0,product:{title:"",category:""}},today:{year:0,month:0,date:0,day:0},calendar:{year:0,month:0,date:0,day:0}}},components:{},methods:{getBooked(){this.$http.get(`${x}/api/${O}/admin/orders`).then(l=>{this.orders=l.data.orders.sort((n,c)=>n.user.address-c.user.address),this.renderSession(),this.renderOrders()}).catch(l=>{console.log(l)})},selectTempOrder(l){console.log("!!"),console.log(l)},setToday(){const l=new Date;this.today.year=this.calendar.year=l.getFullYear(),this.today.month=this.calendar.month=l.getMonth(),this.today.date=this.calendar.date=l.getDate(),this.today.day=this.calendar.day=l.getDay()},adjustYear(l){this.calendar.year+=l},adjustMonth(l){let n=this.calendar.month+l;n>11?(this.adjustYear(1),this.calendar.month=0):n<0?(this.adjustYear(-1),this.calendar.month=11):this.calendar.month=n},booking(l){console.log(l)}},mounted(){this.setToday(),this.getBooked()},computed:{calendarFirstDay(){const l=new Date(this.calendar.year,this.calendar.month,1),n=new Date(this.calendar.year,this.calendar.month,1-l.getDay());return{year:n.getFullYear(),month:n.getMonth(),date:n.getDate(),day:n.getDay()}},calendarMonth(){const l=[];let n;for(let c=0;c<42;c++)n=new Date(this.calendarFirstDay.year,this.calendarFirstDay.month,this.calendarFirstDay.date+c),l.push({year:n.getFullYear(),month:n.getMonth(),date:n.getDate(),day:n.getDay()});return l},formatOrder(){const l={};for(const n of this.orders){const c=Object.keys(n.products)[0],v=n.products[c].product,o=new Date(Number(n.user.address)).setHours(0,0,0,0);l[o]||(l[o]=[]),l[o].push({product:v,user:n.user,time:new Date(Number(n.user.address)).getHours()+":00"})}return console.log(l),l},bookedTime(){const l=[];for(const n of this.orders)l.push(n.user.address*1);return l}}},C={class:"container"},H={class:"calendar text-center"},E={class:"month"},V=r("i",{class:"fas fa-angle-left"},null,-1),F=[V],N={class:"date"},A=r("i",{class:"fas fa-angle-right"},null,-1),S=[A],B=r("div",{class:"weekDay"},[r("div",null,"日"),r("div",null,"一"),r("div",null,"二"),r("div",null,"三"),r("div",null,"四"),r("div",null,"五"),r("div",null,"六")],-1),L=["data-date","data-timestamp"],Y={key:0},P=["data-session"],R=["data-session"],I=["data-session"],U=["data-session"],J={key:1},z=["data-session"],q=["onClick"],G=r("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#orderModal"}," 新增預約/關閉時段 ",-1),K={class:"modal fade",id:"orderModal",tabindex:"-1","aria-labelledby":"orderModalLabel","aria-hidden":"true"},Q={class:"modal-dialog"},W={class:"modal-content"},X=r("div",{class:"modal-header"},[r("h1",{class:"modal-title fs-5",id:"orderModalLabel"}," 新增預約/關閉時段 "),r("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Z={class:"modal-body"},p=r("div",{class:"mb-3 row"},[r("label",{for:"orderTime",class:"col-sm-2 col-form-label"},"時段"),r("div",{class:"col-sm-10"},[r("input",{type:"text",class:"form-control-plaintext",readonly:"",id:"orderTime",value:"2023/03/18 20:00"})])],-1),j={class:"mb-3 row"},$={for:"userName",class:"col-sm-2 col-form-label"},ee={class:"col-sm-10"},ae=g('<div class="mb-3 row"><label for="userPhone" class="col-sm-2 col-form-label">電話</label><div class="col-sm-10"><input type="tel" class="form-control" id="userPhone"></div></div><div class="mb-3 row"><label for="userEmail" class="col-sm-2 col-form-label">Email</label><div class="col-sm-10"><input type="email" class="form-control" id="userEmail"></div></div><div class="mb-3 row"><div class="form-check form-check-inline"><input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="closed"><label class="form-check-label" for="inlineCheckbox1">關閉時段</label></div><div class="form-check form-check-inline"><input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="service"><label class="form-check-label" for="inlineCheckbox2">服務</label></div><div class="form-check form-check-inline"><input class="form-check-input" type="checkbox" id="inlineCheckbox3" value="course"><label class="form-check-label" for="inlineCheckbox3">課程</label></div></div><div class="mb-3 row"><label for="" class="col-sm-2 col-form-label"></label><div class="col-sm-10"><select class="form-select" aria-label="Default select example"></select></div></div>',4),te=r("div",{class:"modal-footer"},[r("button",{type:"button",class:"btn btn-outline-danger me-auto","data-bs-dismiss":"modal"}," 刪除預約 "),r("button",{type:"button",class:"btn btn-primary"},"儲存編輯")],-1);function ne(l,n,c,v,o,e){return d(),s(m,null,[r("div",C,[r("div",H,[r("div",E,[r("button",{class:"btn btn-outline-primary prev",onClick:n[0]||(n[0]=a=>e.adjustMonth(-1))},F),r("div",N,[r("h1",null,h(o.calendar.year),1),r("h2",null,h(o.months[o.calendar.month]),1)]),r("div",{class:"btn btn-outline-primary next",onClick:n[1]||(n[1]=a=>e.adjustMonth(1))},S)]),B,(d(),s(m,null,b(5,a=>r("div",{class:"week",key:"aaa"+a},[(d(),s(m,null,b(7,t=>r("div",{class:w(["day text-start ps-2",{today:e.calendarMonth[(a-1)*7+t-1].year===o.today.year&&e.calendarMonth[(a-1)*7+t-1].month===o.today.month&&e.calendarMonth[(a-1)*7+t-1].date===o.today.date,other:e.calendarMonth[(a-1)*7+t-1].month!==o.calendar.month}]),key:"aaa"+t,"data-date":e.calendarMonth[(a-1)*7+t-1].date,"data-timestamp":new Date(e.calendarMonth[(a-1)*7+t-1].year,e.calendarMonth[(a-1)*7+t-1].month,e.calendarMonth[(a-1)*7+t-1].date).valueOf()},[r("p",null,h(e.calendarMonth[(a-1)*7+t-1].date),1),new Date(e.calendarMonth[(a-1)*7+t-1].year,e.calendarMonth[(a-1)*7+t-1].month,e.calendarMonth[(a-1)*7+t-1].date)>Date.now()&&e.calendarMonth[(a-1)*7+t-1].month==o.calendar.month&&new Date(e.calendarMonth[(a-1)*7+t-1].year,e.calendarMonth[(a-1)*7+t-1].month,e.calendarMonth[(a-1)*7+t-1].date).getDay()===6?(d(),s("div",Y,[e.bookedTime.indexOf(new Date(e.calendarMonth[(a-1)*7+t-1].year,e.calendarMonth[(a-1)*7+t-1].month,e.calendarMonth[(a-1)*7+t-1].date).setHours(10,0,0,0))==-1?(d(),s("button",{key:0,onClick:n[2]||(n[2]=i=>e.booking("??")),type:"button","data-session":new Date(e.calendarMonth[(a-1)*7+t-1].year,e.calendarMonth[(a-1)*7+t-1].month,e.calendarMonth[(a-1)*7+t-1].date).setHours(10,0,0,0),class:"btn btn-sm btn-outline-primary"}," 10:00 ",8,P)):u("",!0),e.bookedTime.indexOf(new Date(e.calendarMonth[(a-1)*7+t-1].year,e.calendarMonth[(a-1)*7+t-1].month,e.calendarMonth[(a-1)*7+t-1].date).setHours(14,0,0,0))==-1?(d(),s("button",{key:1,onClick:n[3]||(n[3]=i=>e.booking("??")),type:"button","data-session":new Date(e.calendarMonth[(a-1)*7+t-1].year,e.calendarMonth[(a-1)*7+t-1].month,e.calendarMonth[(a-1)*7+t-1].date).setHours(14,0,0,0),class:"btn btn-sm btn-outline-primary"}," 14:00 ",8,R)):u("",!0),e.bookedTime.indexOf(new Date(e.calendarMonth[(a-1)*7+t-1].year,e.calendarMonth[(a-1)*7+t-1].month,e.calendarMonth[(a-1)*7+t-1].date).setHours(16,0,0,0))==-1?(d(),s("button",{key:2,onClick:n[4]||(n[4]=i=>e.booking("??")),type:"button","data-session":new Date(e.calendarMonth[(a-1)*7+t-1].year,e.calendarMonth[(a-1)*7+t-1].month,e.calendarMonth[(a-1)*7+t-1].date).setHours(16,0,0,0),class:"btn btn-sm btn-outline-primary"}," 16:00 ",8,I)):u("",!0),e.bookedTime.indexOf(new Date(e.calendarMonth[(a-1)*7+t-1].year,e.calendarMonth[(a-1)*7+t-1].month,e.calendarMonth[(a-1)*7+t-1].date).setHours(20,0,0,0))==-1?(d(),s("button",{key:3,onClick:n[5]||(n[5]=i=>e.booking("??")),type:"button","data-session":new Date(e.calendarMonth[(a-1)*7+t-1].year,e.calendarMonth[(a-1)*7+t-1].month,e.calendarMonth[(a-1)*7+t-1].date).setHours(20,0,0,0),class:"btn btn-sm btn-outline-primary"}," 20:00 ",8,U)):u("",!0)])):new Date(e.calendarMonth[(a-1)*7+t-1].year,e.calendarMonth[(a-1)*7+t-1].month,e.calendarMonth[(a-1)*7+t-1].date)>Date.now()&&e.calendarMonth[(a-1)*7+t-1].month==o.calendar.month&&(new Date(e.calendarMonth[(a-1)*7+t-1].year,e.calendarMonth[(a-1)*7+t-1].month,e.calendarMonth[(a-1)*7+t-1].date).getDay()===1||new Date(e.calendarMonth[(a-1)*7+t-1].year,e.calendarMonth[(a-1)*7+t-1].month,e.calendarMonth[(a-1)*7+t-1].date).getDay()===2||new Date(e.calendarMonth[(a-1)*7+t-1].year,e.calendarMonth[(a-1)*7+t-1].month,e.calendarMonth[(a-1)*7+t-1].date).getDay()===4||new Date(e.calendarMonth[(a-1)*7+t-1].year,e.calendarMonth[(a-1)*7+t-1].month,e.calendarMonth[(a-1)*7+t-1].date).getDay()===5)?(d(),s("div",J,[e.bookedTime.indexOf(new Date(e.calendarMonth[(a-1)*7+t-1].year,e.calendarMonth[(a-1)*7+t-1].month,e.calendarMonth[(a-1)*7+t-1].date).setHours(20,0,0,0))==-1?(d(),s("button",{key:0,onClick:n[6]||(n[6]=i=>e.booking("??")),type:"button",class:"btn btn-sm btn-outline-primary","data-session":new Date(e.calendarMonth[(a-1)*7+t-1].year,e.calendarMonth[(a-1)*7+t-1].month,e.calendarMonth[(a-1)*7+t-1].date).setHours(20,0,0,0)}," 20:00 ",8,z)):u("",!0)])):u("",!0),(d(!0),s(m,null,b(e.formatOrder,(i,M)=>(d(),s(m,{key:M},[(d(!0),s(m,null,b(e.formatOrder[M],(y,f)=>(d(),s(m,{key:"serve"+f},[M==new Date(e.calendarMonth[(a-1)*7+t-1].year,e.calendarMonth[(a-1)*7+t-1].month,e.calendarMonth[(a-1)*7+t-1].date).valueOf()?(d(),s("p",{key:0,class:"booked fs-6",onClick:re=>e.selectTempOrder(y)},h(y.time)+" "+h(y.user.name)+" "+h(y.product.title),9,q)):u("",!0)],64))),128))],64))),128))],10,L)),64))])),64))])]),G,r("div",K,[r("div",Q,[r("div",W,[X,r("div",Z,[p,r("div",j,[r("label",$,"名字"+h(this.tempOrder.name),1),r("div",ee,[k(r("input",{type:"text",class:"form-control",id:"userName","onUpdate:modelValue":n[7]||(n[7]=a=>this.tempOrder.name=a)},null,512),[[D,this.tempOrder.name]])])]),ae]),te])])])],64)}const de=_(T,[["render",ne]]);export{de as default};
